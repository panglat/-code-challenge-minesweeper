(this["webpackJsonpcode-challenge-minesweeper"]=this["webpackJsonpcode-challenge-minesweeper"]||[]).push([[0],{36:function(e,a,t){e.exports=t(53)},45:function(e,a,t){},47:function(e,a,t){},48:function(e,a,t){},49:function(e,a,t){},50:function(e,a,t){},51:function(e,a,t){},52:function(e,a,t){},53:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(18),o=t.n(l),c=t(16),u=t(2),s=t(6),m=t(35);var i,b=function(e){var a;return null===(a=e.minesweeper.game)||void 0===a?void 0:a.board},d=function(e){var a;return null===(a=e.minesweeper.game)||void 0===a?void 0:a.status},v=(t(45),Object(u.f)((function(e){var a=e.history,t=Object(s.b)(),l=Object(s.c)(d);return Object(n.useEffect)((function(){l&&a.push("/board")}),[l,a]),r.a.createElement("div",{className:"game-setup"},r.a.createElement(m.a,{initialValues:{rows:10,columns:12,level:"medium"},validate:function(e){var a={};return(!e.rows||e.rows<4)&&(a.rows="At least 4 rows are required"),(!e.columns||e.columns<4)&&(a.columns="At least 4 columns are required"),e.level||(a.level="Please select a level"),a},onSubmit:function(e){var n="easy"===e.level?.1:"medium"===e.level?.2:.4,r=Math.floor(e.columns*e.rows*n);t({type:"CREATE_GAME",payload:{rows:e.rows,cols:e.columns,bombs:r}}),a.push("/board")},validateOnMount:!0},(function(e){var a=e.values,t=e.handleChange,n=e.handleBlur,l=e.handleSubmit,o=e.errors,c=e.isValid;return r.a.createElement("form",{className:"game-setup__form",onSubmit:l},r.a.createElement("h1",{className:"game-setup__header"},"Minesweeper"),r.a.createElement("div",{className:"game-setup__group"},r.a.createElement("label",{className:"game-setup__label",htmlFor:"gameRows"},"Rows:",r.a.createElement("br",null),r.a.createElement("input",{name:"rows",className:"game-setup__input-text",type:"number",id:"gameRows",onChange:t,onBlur:n,value:a.rows,maxLength:2}),o.rows&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",{className:"game-setup__error"},o.rows)))),r.a.createElement("div",{className:"game-setup__group"},r.a.createElement("label",{className:"game-setup__label",htmlFor:"gameColumns"},"Columns:",r.a.createElement("br",null),r.a.createElement("input",{name:"columns",className:"game-setup__input-text",type:"number",id:"gameColumns",onChange:t,onBlur:n,value:a.columns,maxLength:2}),o.columns&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",{className:"game-setup__error"},o.columns)))),r.a.createElement("div",{className:"game-setup__group"},r.a.createElement("label",{className:"game-setup__label",htmlFor:"gameLevel"},"Level:",r.a.createElement("br",null),r.a.createElement("select",{name:"level",className:"game-setup__input-text",id:"gameLevel",onChange:t,onBlur:n,value:a.level},r.a.createElement("option",{value:"easy"},"Easy"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"hard"},"Hard"))),o.level&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",{className:"game-setup__error"},o.level))),r.a.createElement("div",{className:"game-setup__button-group"},r.a.createElement("button",{type:"submit",disabled:!c,className:"game-setup__button"},"Save")))})))}))),g=t(31),p=t.n(g);!function(e){e[e.Covered=0]="Covered",e[e.Revealed=1]="Revealed",e[e.Flagged=2]="Flagged",e[e.Exploded=3]="Exploded"}(i||(i={}));t(47);var f,E,h=function(e){var a=e.cell,t=e.onReveal,n=e.onFlag;return r.a.createElement("button",{className:p()("cell","cell--".concat(i[a.status].toLowerCase())),onClick:function(e){e.preventDefault(),t(a)},onContextMenu:function(e){e.preventDefault(),n(a)}},function(e){switch(e.status){case i.Revealed:return e.neighborBombs?e.neighborBombs:"";case i.Exploded:return"\ud83d\udca3";case i.Flagged:return"\ud83c\udfc1"}}(a))};(E=f||(f={}))[E.NotSet=0]="NotSet",E[E.Playing=1]="Playing",E[E.Won=2]="Won",E[E.Lost=3]="Lost";var _,y=f,C=(t(48),function(){var e=Object(s.b)(),a=Object(s.c)(b),t=Object(s.c)(d);return a?r.a.createElement("div",{className:"board"},a.map((function(a,n){return r.a.createElement("div",{className:"board__row",key:"row".concat(n)},a.map((function(a,l){return r.a.createElement("div",{className:"board__cell",key:"row".concat(n,"-cell").concat(l)},r.a.createElement(h,{cell:a,onReveal:function(a){t===y.Playing&&e(function(e){return{type:"REVEAL_CELL",payload:e}}(a))},onFlag:function(a){t===y.Playing&&e(function(e){return{type:"FLAG_CELL",payload:e}}(a))}}))})))}))):null}),O=(t(49),Object(u.f)((function(e){var a=e.history,t=Object(s.b)(),n=Object(s.c)(d);return r.a.createElement("div",{className:"game-status"},r.a.createElement("p",{className:"game-status__paragraph"},r.a.createElement("strong",null,"Game Status: "),n===y.Playing?"You are Playing":n===y.Won?"You have WON \ud83e\udd73":"You have LOST \ud83d\ude22"),r.a.createElement("button",{className:"game-status__button",onClick:function(){t({type:"RESET_GAME"}),a.push("/")}},"Reset Game"))}))),w=(t(50),Object(u.f)((function(e){var a=e.history,t=Object(s.c)(d);return Object(n.useEffect)((function(){t||a.push("/")}),[t,a]),r.a.createElement("div",{className:"game-board"},r.a.createElement("h1",{className:"game-board__header"},"Minesweeper"),r.a.createElement(C,null),r.a.createElement(O,null))}))),N=t(14),j=t(32),L=t(4),B=t(33),R=t(34);!function(e){e[e.Continue=0]="Continue",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(_||(_={}));var S=function(){function e(){Object(B.a)(this,e)}return Object(R.a)(e,null,[{key:"calcOneDimensionIndex",value:function(e,a,t){return a*e+t}},{key:"calcHasBomb",value:function(a,t,n,r){var l=e.calcOneDimensionIndex(t,n,r);return a.includes(l)}},{key:"calcNeighborBombs",value:function(a,t,n,r,l){for(var o=0,c=-1;c<=1;c++){var u=r+c;if(u>=0&&u<t)for(var s=-1;s<=1;s++){var m=l+s;if(m>=0&&m<n)e.calcHasBomb(a,u,t,m)&&o++}}return o}},{key:"calcCoveredCellsWithoutBomb",value:function(e){return e.board.reduce((function(e,a){return e+a.filter((function(e){return e.status===i.Covered&&!e.hasBomb})).length}),0)}},{key:"getNeighborCells",value:function(e,a){for(var t=new Array,n=e.options,r=n.rows,l=n.cols,o=-1;o<=1;o++){var c=a.row+o;if(c>=0&&c<r)for(var u=-1;u<=1;u++)if(0!==o||0!==u){var s=a.col+u;s>=0&&s<l&&t.push(e.board[c][s])}}return t}},{key:"createGame",value:function(a){for(var t=a.rows,n=a.cols,r=a.bombs,l=t*n,o=Math.min(r,l),c=new Set;c.size<o;)c.add(Math.floor(l*Math.random()));for(var u=Array.from(c),s=new Array,m=0;m<t;m++){s[m]=new Array;for(var b=0;b<n;b++){var d=e.calcHasBomb(u,t,m,b),v=e.calcNeighborBombs(u,t,n,m,b);s[m].push({row:m,col:b,status:i.Covered,hasBomb:d,neighborBombs:v})}}return{board:s,options:a,status:y.Playing}}},{key:"updateCell",value:function(e,a){return e.map((function(e,t){return a.row!==t?e:e.map((function(e,t){return a.col!==t?e:a}))}))}},{key:"revealCell",value:function(a,t){if(t.status===i.Revealed||t.status===i.Flagged)return a;if(t.hasBomb)return console.log("Lost"),Object(L.a)(Object(L.a)({},a),{},{board:e.updateCell(a.board,Object(L.a)(Object(L.a)({},t),{},{status:i.Exploded})),status:y.Lost});var n=Object(L.a)(Object(L.a)({},a),{},{board:e.updateCell(a.board,Object(L.a)(Object(L.a)({},t),{},{status:i.Revealed}))});return 0===e.calcCoveredCellsWithoutBomb(n)?(console.log("Won"),Object(L.a)(Object(L.a)({},n),{},{status:y.Won})):0===t.neighborBombs?e.revealNeighborCells(n,t):n}},{key:"revealNeighborCells",value:function(a,t){return e.getNeighborCells(a,t).reduce((function(a,t){return e.revealCell(a,t)}),a)}},{key:"flagCell",value:function(a,t){return t.status===i.Covered?Object(L.a)(Object(L.a)({},a),{},{board:e.updateCell(a.board,Object(L.a)(Object(L.a)({},t),{},{status:i.Flagged}))}):t.status===i.Flagged?Object(L.a)(Object(L.a)({},a),{},{board:e.updateCell(a.board,Object(L.a)(Object(L.a)({},t),{},{status:i.Covered}))}):a}}]),e}(),k={game:null};var A=Object(N.combineReducers)({minesweeper:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CREATE_GAME":return{game:S.createGame(a.payload)};case"REVEAL_CELL":return{game:S.revealCell(e.game,a.payload)};case"FLAG_CELL":return{game:S.flagCell(e.game,a.payload)};case"RESET_GAME":return k;default:return e}}});var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(j.composeWithDevTools)(),t=Object(N.createStore)(A,e,a);return t}(function(){try{var e=localStorage.getItem("state");return e?JSON.parse(e):void 0}catch(a){return}}());F.subscribe((function(){!function(e){try{var a=JSON.stringify(e);localStorage.setItem("state",a)}catch(t){}}(F.getState())}));t(51);var M=function(){return r.a.createElement(s.a,{store:F},r.a.createElement(c.a,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/board"},r.a.createElement(w,null)),r.a.createElement(u.a,{path:"/"},r.a.createElement(v,null)))))};t(52);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.63370939.chunk.js.map